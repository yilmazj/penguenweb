<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penguen Yürüyüşü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            font-family: 'Courier New', monospace;
            touch-action: none;
        }

        canvas {
            display: block;
            background: linear-gradient(to bottom, #a8b8c4 0%, #d4dde4 40%, #e8eef2 100%);
        }

        #joystick-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 120px;
            height: 120px;
            z-index: 100;
        }

        #joystick-base {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), rgba(100, 100, 100, 0.15));
            border: 3px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        #joystick-stick {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.8), rgba(150, 150, 150, 0.4));
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            top: 35px;
            left: 35px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="joystick-container">
        <div id="joystick-base"></div>
        <div id="joystick-stick"></div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Joystick kontrolü
        const joystickContainer = document.getElementById('joystick-container');
        const joystickStick = document.getElementById('joystick-stick');
        let joystickActive = false;
        let joystickAngle = 0;
        let joystickPower = 0;

        // Penguen özellikleri
        const penguin = {
            x: canvas.width / 2,
            y: canvas.height - 150,
            size: 60,
            velocityX: 0,
            velocityY: 0,
            rotation: 0,
            walkCycle: 0,
            leftFootDown: true,
            bodyTilt: 0
        };

        // Kamera (dünya kaydırma)
        const camera = {
            x: 0,
            y: 0
        };

        // Arazi noktaları (sonsuz yürüyüş için)
        let terrainPoints = [];
        let mountainLayers = [];
        let terrainOffset = 0;

        // Joystick event listeners
        joystickStick.addEventListener('mousedown', startJoystick);
        joystickStick.addEventListener('touchstart', startJoystick);
        
        document.addEventListener('mousemove', moveJoystick);
        document.addEventListener('touchmove', moveJoystick);
        
        document.addEventListener('mouseup', endJoystick);
        document.addEventListener('touchend', endJoystick);

        function startJoystick(e) {
            e.preventDefault();
            joystickActive = true;
        }

        function moveJoystick(e) {
            if (!joystickActive) return;
            e.preventDefault();

            const rect = joystickContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            let clientX, clientY;
            if (e.type.includes('touch')) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const deltaX = clientX - centerX;
            const deltaY = clientY - centerY;
            const distance = Math.min(35, Math.sqrt(deltaX * deltaX + deltaY * deltaY));
            
            joystickAngle = Math.atan2(deltaY, deltaX);
            joystickPower = distance / 35;

            const stickX = 35 + Math.cos(joystickAngle) * distance;
            const stickY = 35 + Math.sin(joystickAngle) * distance;

            joystickStick.style.left = stickX + 'px';
            joystickStick.style.top = stickY + 'px';
        }

        function endJoystick() {
            joystickActive = false;
            joystickPower = 0;
            joystickStick.style.left = '35px';
            joystickStick.style.top = '35px';
        }

        // Arazi oluşturma
        function generateTerrain() {
            terrainPoints = [];
            const segments = 100;
            const segmentWidth = canvas.width * 3 / segments;

            for (let i = 0; i <= segments; i++) {
                const x = i * segmentWidth;
                const y = canvas.height - 100 + Math.sin(i * 0.1) * 20;
                terrainPoints.push({ x, y });
            }
        }

        function generateMountains() {
            mountainLayers = [];
            
            // Arka dağlar
            for (let layer = 0; layer < 3; layer++) {
                const mountains = [];
                const numPeaks = 8 + layer * 2;
                const layerWidth = canvas.width * 4;
                
                for (let i = 0; i <= numPeaks; i++) {
                    const x = (i / numPeaks) * layerWidth;
                    const baseHeight = 200 + layer * 80;
                    const variation = 150 - layer * 30;
                    const y = baseHeight + Math.sin(i * 0.5 + layer) * variation;
                    
                    mountains.push({ x, y });
                }
                
                mountainLayers.push({
                    peaks: mountains,
                    parallax: 0.2 + layer * 0.15,
                    opacity: 0.3 + layer * 0.15,
                    snowLine: 0.3 - layer * 0.05
                });
            }
        }

        // Dağları çiz
        function drawMountains() {
            mountainLayers.forEach((layer, index) => {
                ctx.save();
                
                const offsetX = camera.x * layer.parallax;
                
                ctx.beginPath();
                ctx.moveTo(-100, canvas.height);
                
                layer.peaks.forEach((peak, i) => {
                    const x = peak.x - offsetX;
                    const y = peak.y;
                    
                    if (i === 0) {
                        ctx.lineTo(x, y);
                    } else {
                        const prevPeak = layer.peaks[i - 1];
                        const prevX = prevPeak.x - offsetX;
                        const prevY = prevPeak.y;
                        
                        const cpX = (prevX + x) / 2;
                        const cpY = Math.min(prevY, y) - 50;
                        
                        ctx.quadraticCurveTo(cpX, cpY, x, y);
                    }
                });
                
                ctx.lineTo(canvas.width + 100, canvas.height);
                ctx.closePath();
                
                // Dağ rengi (koyu kahverengi/gri)
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                const baseColor = 100 - index * 15;
                gradient.addColorStop(0, `rgba(${baseColor}, ${baseColor - 10}, ${baseColor - 20}, ${layer.opacity})`);
                gradient.addColorStop(1, `rgba(${baseColor + 30}, ${baseColor + 25}, ${baseColor + 20}, ${layer.opacity})`);
                
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Kar örtüsü
                ctx.save();
                ctx.clip();
                
                layer.peaks.forEach((peak, i) => {
                    const x = peak.x - offsetX;
                    const y = peak.y;
                    const snowHeight = (canvas.height - y) * layer.snowLine;
                    
                    const snowGrad = ctx.createLinearGradient(x, y, x, y + snowHeight);
                    snowGrad.addColorStop(0, `rgba(255, 255, 255, ${0.9 * layer.opacity})`);
                    snowGrad.addColorStop(0.7, `rgba(240, 245, 250, ${0.5 * layer.opacity})`);
                    snowGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    
                    ctx.fillStyle = snowGrad;
                    ctx.fillRect(x - 80, y, 160, snowHeight);
                });
                
                ctx.restore();
                ctx.restore();
            });
        }

        // Zemin çiz
        function drawTerrain() {
            ctx.save();
            
            ctx.beginPath();
            ctx.moveTo(-100, canvas.height);
            
            terrainPoints.forEach((point, i) => {
                const x = point.x - camera.x - terrainOffset;
                const y = point.y;
                
                if (i === 0) {
                    ctx.lineTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                // Sonsuz döngü için arazi noktalarını yenile
                if (x < -canvas.width) {
                    terrainOffset -= canvas.width * 3;
                }
            });
            
            ctx.lineTo(canvas.width + 100, canvas.height);
            ctx.lineTo(-100, canvas.height);
            ctx.closePath();
            
            // Kar zemin gradyanı
            const gradient = ctx.createLinearGradient(0, canvas.height - 150, 0, canvas.height);
            gradient.addColorStop(0, '#f0f4f8');
            gradient.addColorStop(0.5, '#e8eef5');
            gradient.addColorStop(1, '#dce4ec');
            
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Kar gölgeleri/tekstür
            ctx.fillStyle = 'rgba(200, 210, 220, 0.3)';
            for (let i = 0; i < terrainPoints.length - 1; i++) {
                const point = terrainPoints[i];
                const x = point.x - camera.x - terrainOffset;
                const y = point.y;
                
                if (Math.random() > 0.7) {
                    ctx.fillRect(x, y + 5, 20, 3);
                }
            }
            
            ctx.restore();
        }

        // Penguen çiz
        function drawPenguin() {
            ctx.save();
            ctx.translate(penguin.x, penguin.y);
            ctx.rotate(penguin.bodyTilt);
            
            const size = penguin.size;
            const walkOffset = Math.sin(penguin.walkCycle) * 5;
            
            // Gölge
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.ellipse(0, size * 0.9, size * 0.5, size * 0.15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Vücut (ana oval)
            ctx.fillStyle = '#1a1a1a';
            ctx.beginPath();
            ctx.ellipse(0, walkOffset, size * 0.5, size * 0.7, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Beyaz göğüs
            ctx.fillStyle = '#f5f5f5';
            ctx.beginPath();
            ctx.ellipse(0, walkOffset + size * 0.15, size * 0.35, size * 0.5, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Kanatlar
            ctx.fillStyle = '#1a1a1a';
            
            // Sol kanat
            ctx.save();
            ctx.translate(-size * 0.35, walkOffset);
            ctx.rotate(penguin.leftFootDown ? -0.3 : -0.5);
            ctx.beginPath();
            ctx.ellipse(0, 0, size * 0.15, size * 0.5, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // Sağ kanat
            ctx.save();
            ctx.translate(size * 0.35, walkOffset);
            ctx.rotate(penguin.leftFootDown ? 0.5 : 0.3);
            ctx.beginPath();
            ctx.ellipse(0, 0, size * 0.15, size * 0.5, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // Ayaklar
            ctx.fillStyle = '#ff8c00';
            
            const footSpread = size * 0.3;
            const leftFootY = penguin.leftFootDown ? size * 0.85 : size * 0.75;
            const rightFootY = penguin.leftFootDown ? size * 0.75 : size * 0.85;
            
            // Sol ayak
            ctx.save();
            ctx.translate(-footSpread, leftFootY + walkOffset);
            ctx.rotate(-0.2);
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-size * 0.15, size * 0.08);
            ctx.lineTo(0, size * 0.05);
            ctx.lineTo(size * 0.15, size * 0.08);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
            
            // Sağ ayak
            ctx.save();
            ctx.translate(footSpread, rightFootY + walkOffset);
            ctx.rotate(-0.2);
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-size * 0.15, size * 0.08);
            ctx.lineTo(0, size * 0.05);
            ctx.lineTo(size * 0.15, size * 0.08);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
            
            // Baş
            ctx.fillStyle = '#1a1a1a';
            ctx.beginPath();
            ctx.ellipse(0, walkOffset - size * 0.5, size * 0.35, size * 0.4, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Gözler
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.ellipse(-size * 0.15, walkOffset - size * 0.55, size * 0.12, size * 0.15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.beginPath();
            ctx.ellipse(size * 0.15, walkOffset - size * 0.55, size * 0.12, size * 0.15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Göz bebekleri
            ctx.fillStyle = '#000000';
            ctx.beginPath();
            ctx.ellipse(-size * 0.15 + size * 0.03, walkOffset - size * 0.52, size * 0.05, size * 0.07, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.beginPath();
            ctx.ellipse(size * 0.15 + size * 0.03, walkOffset - size * 0.52, size * 0.05, size * 0.07, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Gaga
            ctx.fillStyle = '#ff8c00';
            ctx.beginPath();
            ctx.moveTo(0, walkOffset - size * 0.45);
            ctx.lineTo(-size * 0.08, walkOffset - size * 0.4);
            ctx.lineTo(size * 0.08, walkOffset - size * 0.4);
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
        }

        // Güncelleme
        function update() {
            // Joystick ile hareket
            if (joystickPower > 0.1) {
                penguin.velocityX = Math.cos(joystickAngle) * joystickPower * 3;
                penguin.velocityY = Math.sin(joystickAngle) * joystickPower * 3;
                
                // Yürüme animasyonu
                penguin.walkCycle += 0.15 * joystickPower;
                
                // Ayak değişimi
                if (Math.floor(penguin.walkCycle / Math.PI) % 2 === 0) {
                    penguin.leftFootDown = true;
                    penguin.bodyTilt = 0.08; // Sağa yatık
                } else {
                    penguin.leftFootDown = false;
                    penguin.bodyTilt = -0.08; // Sola yatık
                }
                
                // Rotasyon (yürüme yönü)
                penguin.rotation = joystickAngle;
            } else {
                penguin.velocityX *= 0.9;
                penguin.velocityY *= 0.9;
                penguin.bodyTilt *= 0.9;
            }
            
            // Kamera hareketi (dünya kaydırma)
            camera.x += penguin.velocityX;
            camera.y += penguin.velocityY;
            
            // Sonsuz arazi için dağları kaydır
            mountainLayers.forEach(layer => {
                layer.peaks.forEach(peak => {
                    if (peak.x - camera.x * layer.parallax < -canvas.width) {
                        peak.x += canvas.width * 4;
                    }
                });
            });
        }

        // Ana oyun döngüsü
        function gameLoop() {
            // Temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Gökyüzü gradyanı
            const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            skyGradient.addColorStop(0, '#a8b8c4');
            skyGradient.addColorStop(0.4, '#d4dde4');
            skyGradient.addColorStop(1, '#e8eef2');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Çiz
            drawMountains();
            drawTerrain();
            drawPenguin();
            
            // Güncelle
            update();
            
            requestAnimationFrame(gameLoop);
        }

        // Başlat
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            generateTerrain();
            generateMountains();
        });

        generateTerrain();
        generateMountains();
        gameLoop();
    </script>
</body>
</html>